ACTION=="remove", GOTO="persistent_v4l_my_end"
ATTR{name}=="Loopback video device *", SYMLINK+="v4l/by-id/$attr{name}", OPTIONS+="string_escape=replace"
LABEL="persistent_v4l_my_end"
# do not edit this file, it will be overwritten on update

ACTION=="remove", GOTO="my_fix_v4l_index_end"
SUBSYSTEM!="video4linux", GOTO="my_fix_v4l_index_end"
ENV{MAJOR}=="", GOTO="my_fix_v4l_index_end"

IMPORT{program}="v4l_id $devnode"

SUBSYSTEMS=="usb", IMPORT{builtin}="usb_id"

KERNEL=="video*", ENV{ID_SERIAL}=="?*", ENV{UNOCCUPIED_PATTERN}="v4l/by-id-my/$env{ID_BUS}-$env{ID_SERIAL}-video-index%%d"
IMPORT{program}="/usr/local/bin/find-unoccupied-device-index /dev/$env{UNOCCUPIED_PATTERN}"
KERNEL=="video*", ENV{ID_SERIAL}=="?*", SYMLINK+="v4l/by-id-my/$env{ID_BUS}-$env{ID_SERIAL}-video-index$env{UNOCCUPIED_INDEX}"


LABEL="my_fix_v4l_index_end"

